From 8f66f5c3ca61751a80cc133ff4c59019d6fca406 Mon Sep 17 00:00:00 2001
From: Bruno BELANYI <bruno@belanyi.fr>
Date: Tue, 31 Oct 2023 12:15:30 +0000
Subject: [PATCH] Bump django-allauth from 0.54.0 to 0.58.1

See the backwards incompatible changes [1].

[1]: https://docs.allauth.org/en/latest/release-notes/recent.html#id10
---
 recipes/settings.py | 1 +
 requirements.txt    | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/recipes/settings.py b/recipes/settings.py
index df2c2b1de..b836ea656 100644
--- a/recipes/settings.py
+++ b/recipes/settings.py
@@ -218,6 +218,7 @@
     'django.middleware.locale.LocaleMiddleware',
     'django.middleware.clickjacking.XFrameOptionsMiddleware',
     'cookbook.helper.scope_middleware.ScopeMiddleware',
+    'allauth.account.middleware.AccountMiddleware',
 ]
 
 if DEBUG_TOOLBAR:
diff --git a/requirements.txt b/requirements.txt
index 26d81b471..09ed2381a 100644
--- a/requirements.txt
+++ b/requirements.txt
@@ -29,7 +29,7 @@ microdata==0.8.0
 Jinja2==3.1.2
 django-webpack-loader==1.8.1
 git+https://github.com/BITSOLVER/django-js-reverse@071e304fd600107bc64bbde6f2491f1fe049ec82
-django-allauth==0.54.0
+django-allauth==0.58.1
 recipe-scrapers==14.36.1
 django-scopes==2.0.0
 pytest==7.3.1
